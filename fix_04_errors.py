import json
import re

# 파일 읽기
with open('today_unse/stories/04_갑오.json', 'r', encoding='utf-8') as f:
    data = json.load(f)

# 모든 운세 메시지 처리
for unsung_name, fortunes in data['운세'].items():
    for fortune in fortunes:
        if '본문' in fortune:
            본문 = fortune['본문']

            # 1. 부사 + 방식 → 형용사 + 방식
            본문 = re.sub(r'진심으로\s+방식', '진심 어린 방식', 본문)
            본문 = re.sub(r'투명하게\s+방식', '투명한 방식', 본문)
            본문 = re.sub(r'시원시원하게\s+방식', '시원시원한 방식', 본문)
            본문 = re.sub(r'솔직하게\s+방식', '솔직한 방식', 본문)
            본문 = re.sub(r'당당하게\s+방식', '당당한 방식', 본문)
            본문 = re.sub(r'뜨겁게\s+방식', '뜨거운 방식', 본문)

            # 2. 조사 중복 제거: "~~으로로" → "~~으로"
            본문 = re.sub(r'직설적으로로', '직설적으로', 본문)
            본문 = re.sub(r'직관적으로로', '직관적으로', 본문)
            본문 = re.sub(r'몰입하며로', '몰입하며', 본문)

            # 3. 조사 중복 제거: "~~하게이" → "~~한 것이"
            본문 = re.sub(r'빠르게이', '빠르게', 본문)
            본문 = re.sub(r'열정적으로이', '열정적으로', 본문)
            본문 = re.sub(r'거침없이이', '거침없이', 본문)
            본문 = re.sub(r'집중해서이', '집중해서', 본문)
            본문 = re.sub(r'따뜻하게이', '따뜻하게', 본문)
            본문 = re.sub(r'당당하게이', '당당하게', 본문)
            본문 = re.sub(r'진심으로이', '진심으로', 본문)
            본문 = re.sub(r'몰입하며이', '몰입하며', 본문)

            # 4. 조사 중복 제거: "~~하게을" → "~~한 것을"
            본문 = re.sub(r'솔직하게을', '솔직했던 것을', 본문)
            본문 = re.sub(r'창의적으로을', '창의적인 방식을', 본문)
            본문 = re.sub(r'재능을 발휘하며을', '재능을 발휘하는 것을', 본문)
            본문 = re.sub(r'거침없이을', '거침없는 것을', 본문)
            본문 = re.sub(r'직설적으로을', '직설적인 방식을', 본문)
            본문 = re.sub(r'열정적으로을', '열정적인 방식을', 본문)

            # 5. 조사 중복 제거: "~~하게에" → "~~하게"
            본문 = re.sub(r'명확하게에', '명확하게', 본문)
            본문 = re.sub(r'뜨겁게에', '뜨겁게', 본문)
            본문 = re.sub(r'솔직하게에', '솔직하게', 본문)
            본문 = re.sub(r'거침없이에', '거침없이', 본문)
            본문 = re.sub(r'직관적으로에', '직관적으로', 본문)

            # 6. 조사 중복 제거: "~~하게의" → "~~한 표현의"
            본문 = re.sub(r'열정적으로의', '열정적인 표현의', 본문)
            본문 = re.sub(r'솔직하게의', '솔직한 표현의', 본문)
            본문 = re.sub(r'시원시원하게의', '시원시원한 표현의', 본문)

            fortune['본문'] = 본문

# 파일 저장
with open('today_unse/stories/04_갑오.json', 'w', encoding='utf-8') as f:
    json.dump(data, f, ensure_ascii=False, indent=2)

print("[OK] 04_갑오.json 문법 오류 수정 완료")
print("- 조사 중복 제거")
print("- 부사/형용사 불일치 수정")
print("- 어색한 표현 개선")
