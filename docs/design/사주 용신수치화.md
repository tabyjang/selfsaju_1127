# **사주 명리학의 정량적 해석을 위한 컴퓨터 알고리즘 아키텍처 및 용신 산출 최적화 모델**

## **서론: 형이상학의 수치화와 알고리즘적 도전**

사주명리학(Four Pillars of Destiny)은 천간(天干)과 지지(地支)의 간지 결합을 통해 우주의 기운이 개인의 생체와 운명에 미치는 영향을 분석하는 동양의 전통 학문이다. 수천 년간 누적된 임상 데이터와 이론 체계를 갖추고 있음에도 불구하고, 명리학은 '감명가(Interpreter)'의 주관적 직관에 크게 의존해 왔으며, 이로 인해 분석 결과의 일관성이 결여되는 문제가 지속적으로 제기되어 왔다. 현대의 컴퓨팅 기술은 이러한 형이상학적 논리를 정량적 데이터로 변환하고, 명확한 논리 회로를 통해 표준화된 해석 모델을 구축할 것을 요구하고 있다.

본 연구 보고서는 사주 원국(Natal Chart)의 오행 세력을 수치화하고, 이를 바탕으로 신강/신약을 판별하며, 최종적으로 조후(Climate), 억부(Balance), 통관(Flow), 병약(Cure), 격국(Pattern) 등 다차원적인 변수를 고려하여 최적의 용신(用神, Useful God)을 도출하는 5단계(Phase)의 알고리즘 아키텍처를 설계하는 것을 목적으로 한다. 특히 단순한 오행의 개수 산정을 넘어, 일간(Day Master)을 중심으로 한 위치별 가중치 행렬(Positional Weight Matrix)과 합(合)·충(沖)에 의한 동적 변화(Dynamic Interaction)를 반영한 고도화된 수치 모델을 제안한다. 또한, 격국론에서 제시하는 순용(順用)과 역용(逆用)의 원리를 알고리즘화하여 상신(相神) 산출 로직을 구체화함으로써, 컴퓨터가 인간 전문가 수준의 복합적 판단을 수행할 수 있는 논리적 기반을 마련하고자 한다.

## ---

**Phase 1: 오행 세력표(Five Elements Force Matrix)의 정량적 설계**

사주 분석의 첫 단계는 8글자(4주 x 2자)가 내포하고 있는 에너지의 총량을 오행별로 정량화하는 것이다. 이는 정적인 텍스트 데이터를 동적인 수치 데이터로 변환하는 과정으로, 각 글자의 시공간적 영향력을 수학적으로 모델링해야 한다. 이를 위해 본 연구에서는 '기본 질량(Base Mass)', '위치 가중치(Positional Weight)', '지장간 분해(Hidden Stem Decomposition)', 그리고 '상호작용 변환(Interaction Transformation)' 모델을 도입한다.

### **1.1 지장간(Jijanggan)의 벡터 분해와 기본 질량 산출**

사주를 구성하는 천간과 지지는 동일한 에너지 값을 갖지 않는다. 천간이 순수한 기운(Pure Energy)이라면, 지지는 여러 기운이 섞여 있는 복합체(Complex Body)이다. 따라서 지지의 정확한 오행 값을 산출하기 위해서는 지장간을 분해하여 각 성분의 비율을 계산해야 한다.

#### **1.1.1 월률분야(月律分野) 기반의 시간적 가중치**

월지(Month Branch)는 계절의 사령(Command)을 의미하므로, 태어난 날짜가 해당 월의 어느 절입일(Solar Term)에 속하는지에 따라 지장간의 사령 신(Ruling God)이 달라진다. 컴퓨터 알고리즘은 이를 정밀하게 반영하기 위해 사용자가 입력한 생년월일시를 기준으로 절입일로부터 경과된 시간을 계산하고, 해당 구간을 담당하는 지장간에 가중치를 부여해야 한다.

그러나 월지를 제외한 나머지 연지, 일지, 시지의 경우, 특정 시점을 점유하는 것이 아니라 그 글자 자체가 가진 고유의 오행 비율로 작용한다. 본 알고리즘은 범용성을 위해 비(非)월지 지지에 대해서는 표준 배분율을 적용하고, 월지에 대해서는 계절적 가중치를 추가하는 이원화된 방식을 채택한다.

**표 1\. 지지별 지장간 분해 및 오행 배분율 표준 모델 (Standard Distribution Model)**

| 지지 (Branch) | 분류 | 지장간 구성 (Days) | 오행 배분율 (%) | 알고리즘 적용 로직 |
| :---- | :---- | :---- | :---- | :---- |
| **자(子, Water)** | 왕지(旺地) | 임(10), 계(20) | 수(100) | 순수 수 기운으로 100% 산정 |
| **축(丑, Earth)** | 고지(庫地) | 계(9), 신(3), 기(18) | 토(60), 수(30), 금(10) | 토의 작용이 주되나, 수와 금의 잠재력 계산 필수 |
| **인(寅, Wood)** | 생지(生地) | 무(7), 병(7), 갑(16) | 목(60), 화(25), 토(15) | 화의 장생지로 화 기운 25% 반영 |
| **묘(卯, Wood)** | 왕지 | 갑(10), 을(20) | 목(100) | 순수 목 기운 |
| **진(辰, Earth)** | 고지 | 을(9), 계(3), 무(18) | 토(60), 목(30), 수(10) | 봄의 토, 목의 기운 강함 |
| **사(巳, Fire)** | 생지 | 무(7), 경(7), 병(16) | 화(60), 금(25), 토(15) | 금의 장생지, 금 기운 반영 중요 |
| **오(午, Fire)** | 왕지 | 병(10), 기(9), 정(11) | 화(70), 토(30) | 화와 토가 공존, 기토의 작용력 주의 |
| **미(未, Earth)** | 고지 | 정(9), 을(3), 기(18) | 토(60), 화(30), 목(10) | 여름의 토, 화기 강함 |
| **신(申, Metal)** | 생지 | 무(7), 임(7), 경(16) | 금(60), 수(25), 토(15) | 수의 장생지 |
| **유(酉, Metal)** | 왕지 | 경(10), 신(20) | 금(100) | 순수 금 기운 |
| **술(戌, Earth)** | 고지 | 신(9), 정(3), 무(18) | 토(60), 금(30), 화(10) | 가을의 토, 금기 강함 |
| **해(亥, Water)** | 생지 | 무(7), 갑(7), 임(16) | 수(60), 목(25), 토(15) | 목의 장생지 |

이 표의 데이터는 시스템 내부의 Base\_Reference\_Table로 저장되어, 각 지지가 입력될 때마다 해당 오행 점수로 분해되어 Force\_Vector에 가산된다.

### **1.2 위치 가중치 행렬 (Positional Weight Matrix, $W\_p$)**

일간(Day Master)은 사주의 주체이므로 에너지 계산의 대상이 아니라 기준점이 된다. 일간을 제외한 7글자는 일간과의 거리 및 영향력의 크기에 따라 차등적인 점수를 부여받아야 한다. 이를 위해 위치 가중치 행렬 $W\_p$를 정의한다.

$$Score\_{pos}(i) \= BaseMass(i) \\times W\_{loc}(i)$$  
여기서 $W\_{loc}$는 각 위치(주소)가 갖는 고유한 중요도 계수이다.

1. **월지(Month Branch): $W\_{month} \= 2.5 \\sim 3.0$**  
   * **논리적 근거:** 월지는 태어난 계절을 의미하며, 사주 전체의 온도와 기후를 결정하는 사령관(Commander)이다. 명리학 고전인 《자평진전》에서도 "월령은 제강(提綱)"이라 하여 가장 중요한 위치로 꼽는다. 따라서 다른 글자 대비 2.5배에서 3.0배의 가중치를 부여한다.  
2. **일지(Day Branch): $W\_{day} \= 1.5 \\sim 1.8$**  
   * **논리적 근거:** 일지는 일간이 앉아 있는 자리(좌하)이자 배우자궁으로, 일간과 가장 밀접하게 붙어 있어 직접적인 영향력을 행사한다. 월지 다음으로 높은 가중치를 갖는다.  
3. **시지(Hour Branch): $W\_{hour} \= 1.2$**  
   * **논리적 근거:** 시지는 말년과 자식을 의미하며, 사주의 최종적인 귀착점이 된다. 또한 시지는 숨겨진 잠재력을 의미하므로 표준(1.0)보다 약간 높은 가중치를 둔다.  
4. **월간(Month Stem): $W\_{m\\\_stem} \= 1.2$**  
   * **논리적 근거:** 일간 바로 옆에서 사회적 환경을 조성하는 위치이다. 청년기의 운을 주관하며 일간에 직접적인 생극(生剋)을 가한다.  
5. **시간(Hour Stem): $W\_{h\\\_stem} \= 1.1$**  
   * **논리적 근거:** 일간의 미래이자 진로를 의미한다.  
6. **년주(Year Pillar): $W\_{year} \= 0.8 \\sim 1.0$**  
   * **논리적 근거:** 일간으로부터 물리적 거리가 가장 멀다. 조상이나 국가적 배경을 의미하지만, 일간의 강약에 미치는 직접적인 영향력은 상대적으로 낮다.

### **1.3 합(合)·충(沖)에 의한 동적 변화 알고리즘 (Dynamic Interaction Engine)**

정적인 위치 점수 산출 후, 글자 간의 상호작용인 합과 충을 적용하여 오행 수치를 재조정해야 한다. 이는 화학 반응식과 유사하여, 두 원소가 만나 새로운 원소로 변하거나(합화), 서로를 파괴하여 에너지가 소멸하는(충) 과정을 시뮬레이션한다.

#### **1.3.1 천간합(Heavenly Stem Combination)의 조건부 화(Transformation) 로직**

천간합(예: 甲己合)이 발생했을 때, 무조건 합화(合化)하여 토(土)가 되는 것이 아니다. '화기(化氣) 성립 조건'을 엄격한 알고리즘으로 구현해야 한다.

* **1단계: 인접성 검사 (Adjacency Check)**  
  * 합을 하는 두 글자가 서로 붙어 있는가? (년-월, 월-일, 일-시)  
  * 격위(떨어져 있음)된 경우: 합의 의향은 있으나 힘은 20\~30% 수준으로 미미함. (기반 현상 없음)  
* **2단계: 월령 검사 (Seasonality Check)**  
  * 변화하려는 오행이 월지(Month Branch)를 장악했는가?  
  * 예: 갑기합토(甲己合土) 시, 월지가 진술축미(辰戌丑未) 또는 화(火)왕절인가?  
  * **TRUE:** '진합(True Combination)'으로 판정. 두 천간의 고유 점수를 0으로 만들고, 화오행(土)에 두 글자의 합산 점수 $\\times 1.5$ (시너지 효과)를 부여한다.  
  * **FALSE:** '기반(Tying)'으로 판정. 두 글자는 서로 묶여서 고유의 작용을 못하게 된다. 각 글자의 점수를 50% 삭감한다.

#### **1.3.2 지지합(Earthly Branch Combination)의 우선순위 및 가중치**

지지합은 방합(Directional), 삼합(Triangular), 육합(Pair)으로 나뉘며, 세력 형성의 규모가 다르다.

* **알고리즘 우선순위:** 방합 $\\ge$ 삼합 \> 육합  
  * 시스템 충돌 시(예: 자(子)가 신(申)과 삼합을 하려 하고, 축(丑)과 육합을 하려 할 때), 더 강력한 세력을 형성하는 쪽으로 에너지를 몰아준다. 단, 월지를 포함한 합을 최우선으로 한다.  
* **점수 변환 로직:**  
  * **삼합(예: 申子辰):** 수국(Water Bureau) 형성. 세 글자의 점수를 모두 수(Water)로 변환하고, 결속력 보너스 2.0배를 곱한다.  
  * **반합(Half-Combo):** 왕지(자오묘유)를 포함한 2글자(예: 申子, 子辰)는 성립하되, 가중치는 1.5배로 낮춘다. 왕지가 빠진 가합(예: 申辰)은 인정하지 않거나 0.3배의 미미한 힘만 부여한다.  
* **충(Clash)의 수치적 감산:**  
  * 충은 기본적으로 파괴 작용이다.  
  * **왕지충(자오, 묘유):** 가장 격렬함. 두 글자 모두 점수 40% 손실.  
  * **생지충(인신, 사해):** 역동적임. 점수 30% 손실.  
  * **고지충(진술, 축미):** 붕충(친구끼리의 충). 점수 손실보다는 장간의 개고(Open Storage) 효과 발생. 지장간의 숨겨진 천간들이 밖으로 나와 점수에 20% 가산되는 복잡한 로직 적용.

## ---

**Phase 2: 신강(Strong)/신약(Weak) 판별을 위한 수치 해석**

보정된 오행 세력표가 완성되면, 이를 바탕으로 일간의 강약을 판단한다. 이는 억부 용신을 잡기 위한 핵심 전제이다. 전통적인 등령, 득지, 득세 개념을 수치 알고리즘으로 변환한다.

### **2.1 3대 판단 기준의 정량화 (Quantification of Strength Factors)**

1. **득령(得令, Seizing the Season):**  
   * 조건: 월지가 일간과 같은 오행이거나 일간을 생하는 오행(인성)인가?  
   * **Score:** 충족 시 \+30점. (전체 영향력의 약 30\~40%를 월지가 차지함을 반영)  
2. **득지(得地, Seizing the Territory):**  
   * 조건: 일지가 일간과 같은 오행이거나 인성인가? 또는 일간의 12운성이 장생, 관대, 건록, 제왕인가?  
   * **Score:** 충족 시 \+15점.  
3. **득세(得勢, Seizing the Power):**  
   * 조건: 사주 전체에서 비겁(같은 오행)과 인성(생하는 오행)의 점수 총합이 식상, 재성, 관성의 총합보다 큰가?  
   * **Score:** 계산된 $Score\_{support}$ (인성+비겁) 수치 자체를 반영.

### **2.2 통근(Rooting) 계수와 최종 신강약 지수 산출**

단순히 인성(나를 돕는 기운)이 많다고 해서 신강한 것은 아니다. 일간이 지지에 자신의 뿌리(Root)를 내리고 있는가가 중요하다. 이를 '통근'이라 하며, 통근하지 못한 일간은 인성이 많아도 '부옥빈인(집만 크고 사람은 가난함)'이나 '모왕자쇠'로 판단하여 실질적 신약으로 분류해야 한다.

**\[알고리즘 공식 2.2\] 신강약 지수 ($Index\_{DayMaster}$)**

$$Index\_{DM} \= (Score\_{Support} \\times \\alpha\_{Root}) \- Score\_{Oppose}$$

* $Score\_{Support}$: 비견, 겁재, 편인, 정인의 보정된 세력 점수 합.  
* $Score\_{Oppose}$: 식신, 상관, 편재, 정재, 편관, 정관의 보정된 세력 점수 합.  
* $\\alpha\_{Root}$ (통근 계수):  
  * 일간이 월지에 통근: 1.5  
  * 일간이 일지에 통근: 1.3  
  * 일간이 시지/연지에 통근: 1.1  
  * 통근처가 전무함(무근): 0.7 (인성이 많아도 허약함으로 간주)

### **2.3 판별 임계값 (Thresholds) 및 분류**

계산된 $Index\_{DM}$을 기준으로 사주의 유형을 5단계로 분류한다. (정규화된 점수 100점 기준 예시)

**표 2\. 신강/신약 판별 기준표**

| 분류 | 점수 구간 (Strength Score) | 특징 및 알고리즘 판정 |
| :---- | :---- | :---- |
| **태왕(Extreme Strong)** | \+50 이상 | 종왕격/종강격 가능성 탐색 (Phase 5). 일반 억부 불가. |
| **신강(Strong)** | \+10 \~ \+49 | 억부 용신 적용 (관성/식상/재성 중 선택). |
| **중화(Balanced)** | \-10 \~ \+10 | 가장 이상적. 용신 잡기가 까다로우며 조후나 통관을 우선 고려. |
| **신약(Weak)** | \-11 \~ \-40 | 억부 용신 적용 (인성/비겁 중 선택). |
| **태약(Extreme Weak)** | \-41 이하 | 종격(종재, 종살, 종아) 가능성 탐색. 일반 억부 불가. |

## ---

**Phase 3: 조후(Climate) 가중치와 환경 보정**

조후는 오행의 생극제화 이전에 생명체가 생존하기 위한 온습도 조건을 의미한다. 《궁통보감(난강망)》 이론을 기반으로 하며, 특정 계절에는 억부보다 조후가 우선한다는 '조후위급(調候爲急)' 원칙을 알고리즘에 반영한다.

### **3.1 월지 기준 조후 점수표 (Johu Score Table) 및 긴급도**

월지를 입력받아 사주의 '온도(Temperature)'와 '습도(Humidity)' 지수를 산출하고, 이에 따른 필요 오행(조후 용신)과 긴급도를 결정한다.

**표 3\. 월지별 조후 데이터베이스 및 가중치 로직**

| 월지 (Month) | 기후 특성 | 온도 지수 (Temp) | 조후 용신 (Target) | 긴급도 계수 (Uclimate​) |
| :---- | :---- | :---- | :---- | :---- |
| **자(子, 11월)** | 동지 섣달, 혹한 | \-5 (Extreme Cold) | **병화(丙)**, 무토(戊) | **Critical (3.0)** |
| **축(丑, 12월)** | 얼어붙은 땅 | \-4 (Very Cold) | **병화(丙)**, 갑목(甲) | High (2.0) |
| **인(寅, 1월)** | 초봄, 한기 잔존 | \-2 (Cold) | 병화(丙) | Moderate (1.5) |
| **묘(卯, 2월)** | 양기 시생 | 0 (Neutral) | \- | Low (1.0) |
| **진(辰, 3월)** | 봄, 습함 | \+1 (Warm/Wet) | 경금(庚) | Low (1.0) |
| **사(巳, 4월)** | 초여름 | \+3 (Hot) | **임수(壬)**, 계수(癸) | Moderate (1.5) |
| **오(午, 5월)** | 한여름, 염천 | \+5 (Extreme Hot) | **임수(壬)**, 계수(癸), 신금(辛) | **Critical (3.0)** |
| **미(未, 6월)** | 고온 건조 | \+4 (Hot/Dry) | **계수(癸)**, 갑목(甲) | High (2.0) |
| **신(申, 7월)** | 초가을, 서늘 | \+1 (Cool) | \- | Low (1.0) |
| **유(酉, 8월)** | 가을 | 0 (Neutral) | \- | Low (1.0) |
| **술(戌, 9월)** | 늦가을, 건조 | \-1 (Dry) | 갑목(甲), 임수(壬) | Moderate (1.5) |
| **해(亥, 10월)** | 초겨울 | \-3 (Cold) | **병화(丙)**, 무토(戊) | High (2.0) |

### **3.2 조후 적용 알고리즘**

1. **조후 필터링:** $U\_{climate}$가 'Critical(3.0)' 또는 'High(2.0)'인 경우, 시스템은 억부 용신을 찾기 전에 조후 용신을 먼저 탐색한다.  
2. **용신 매칭 및 가산점:** 사주 원국에 조후 용신에 해당하는 글자가 존재하는지 스캔한다.  
   * 천간에 투출된 경우: 해당 오행의 용신 적합도 점수에 \+30점 가산.  
   * 지지에만 있는 경우: \+15점 가산.  
   * 지장간에만 있는 경우: \+5점 가산.  
3. **조후 결핍 시 패널티:** 조후가 시급한데 해당 글자가 전무(全無)하다면, 사주의 격(Grade)을 하향 조정하고, 대운에서 해당 오행이 올 때 발복(發福)하는 것으로 예측 로직을 설정한다.

## ---

**Phase 4: 다차원 용신(Yongsin) 산출 알고리즘**

앞선 단계의 데이터를 종합하여 최종적으로 용신을 결정한다. 컴퓨터 알고리즘은 단 하나의 답을 내는 것이 아니라, 억부, 통관, 병약, 격국의 4가지 관점에서 각각 최적해를 구하고, 우선순위 로직에 따라 최종 권장 용신을 제시해야 한다.

### **4.1 억부(Eokbu) 모듈: 균형(Balance)을 위한 PID 제어**

억부법은 강한 것은 덜어내고 약한 것은 돕는다는 기본 원칙이다. 이는 공학의 PID 제어기(Control System)와 유사하게 목표값(중화)에 도달하기 위한 오차 수정 입력을 찾는 과정이다.

* **Logic (신강할 때):**  
  * 우선순위 1: 관살(Officer/Killing) \- 일간을 극하여 제어함. (단, 일간이 너무 강하면 반발하므로 주의)  
  * 우선순위 2: 식상(Output) \- 강한 기운을 자연스럽게 설기(Drain)함. (관살이 약하거나 없을 때 최선)  
  * 우선순위 3: 재성(Wealth) \- 식상의 생을 받아 기운을 소모시킴.  
* **Logic (신약할 때):**  
  * 우선순위 1: 인성(Resource) \- 일간을 생조함. (관살이 많아 신약할 때 필수 \- 관인상생)  
  * 우선순위 2: 비겁(Parallel) \- 일간의 세력이 되어줌. (재성이 많아 신약할 때 필수 \- 득비리재)

### **4.2 통관(Tonggwan) 모듈: 교량(Bridge) 탐색**

두 오행의 세력이 비등하여 대립할 때(예: 금 45점 vs 목 45점), 어느 한쪽을 억부로 편들면 싸움이 격화된다. 이때는 두 세력을 이어주는 통관신이 필요하다.

* **트리거 조건:** 대립하는 두 오행의 점수 차이가 10% 이내이고, 서로 극(Clash)하는 관계일 때.  
* **알고리즘:** $Element\_{bridge} \= Output(Element\_{Attacker}) \\cap Input(Element\_{Defender})$  
  * 예: 금(Attacker)과 목(Defender) 대립 \-\> 금생**수**, 수생목 \-\> \*\*수(Water)\*\*가 통관 용신.  
* **가중치:** 통관 조건 충족 시, 해당 오행에 가중치 \+20점을 부여하여 억부 용신보다 우선순위를 높인다.

### **4.3 병약(Byeongyak) 모듈: 손상 복구(Recovery)**

사주 내에서 가장 소중한 글자(월지 또는 희신)가 다른 글자에 의해 파괴되고 있을 때, 그 파괴하는 글자를 제압하는 것을 용신으로 삼는다.

* **병(Disease):** 길신을 충하거나 극하는 글자 (예: 관성을 깨는 상관, 인성을 깨는 재성).  
* **약(Medicine):** 병을 제거하는 글자 (예: 상관을 제압하는 인성, 재성을 제압하는 비겁).  
* **로직:**  
  1. 사주의 격국이나 억부상 중요한 글자($KeyElement$)를 식별.  
  2. $KeyElement$를 극하는 $EnemyElement$가 강한지 확인.  
  3. $EnemyElement$를 극하는 $CureElement$가 원국에 있는지 검색.  
  4. 존재한다면 $CureElement$를 최우선 용신(약신)으로 선정.

### **4.4 격국(Gyeokguk) 모듈: 패턴 인식과 상신(Sangsin) 산출**

격국은 사주의 사회적 효용성과 직업적 적성을 결정한다. 월지 지장간의 투출 여부로 격을 정하고, 그 격이 길신(순용)인지 흉신(역용)인지에 따라 상신(Pattern Keeper)을 찾는다.

#### **4.4.1 격국 판별 알고리즘**

1. 월지 지장간의 본기(Main Qi)가 천간에 투출했는가? \-\> YES: 격으로 확정.  
2. 없다면 중기(Middle Qi)가 투출했는가? \-\> YES: 격으로 확정.  
3. 없다면 여기(Initial Qi)가 투출했는가? \-\> YES: 격으로 확정.  
4. 모두 없다면? \-\> 월지 본기 자체를 격으로 삼음.

#### **4.4.2 순용(順用)과 역용(逆用)의 상신 산출 로직**

컴퓨터는 격의 종류에 따라 미리 정의된 '필요 오행 매트릭스'를 참조하여 상신을 찾는다.

**표 4\. 격국별 상신 산출 매트릭스 (Sangsin Determination Matrix)**

| 구분 | 격(Pattern) | 정의 | 처리 원칙 | 상신(Sangsin) 탐색 알고리즘 |
| :---- | :---- | :---- | :---- | :---- |
| **길신 (순용)** | **정관격 (Officer)** | 바른 권위 | **생조/보호** | 1\. 재성(재생관) 2\. 인성(관인상생) \- 상관으로부터 보호 |
|  | **재성격 (Wealth)** | 재물, 결과 | **생조/보호** | 1\. 식상(식신생재) 2\. 관성(재생관) \- 비겁으로부터 보호 |
|  | **인수격 (Seal)** | 학문, 자격 | **생조/보호** | 1\. 관살(관인상생) 2\. 비겁 \- 재성으로부터 보호 |
|  | **식신격 (Food)** | 재능, 생산 | **생조/보호** | 1\. 비겁 2\. 재성(식신생재) \- 편인(도식)으로부터 보호 |
| **흉신 (역용)** | **칠살격 (Killing)** | 편관, 폭력 | **제압/설기** | 1\. **식신(식신제살)** \- 최우선 2\. 인성(살인상생) \- 차선 |
|  | **상관격 (Injury)** | 반항, 파격 | **제압** | 1\. **인성(상관패인)** \- 최우선 2\. 재성(상관생재) \- 흐름 유도 |
|  | **양인/겁재격** | 경쟁, 탈재 | **제압** | 1\. **편관(양인합살)** \- 최우선 2\. 식상 \- 설기 |
|  | **편인격 (Owl)** | 치우친 생각 | **제압** | 1\. **편재(편인제화)** \- 최우선 |

## ---

**Phase 5: 최종 통합 및 실행 알고리즘 (The Executive Pipeline)**

위의 모든 분석 모듈을 통합하여 컴퓨터가 계산 가능한 순차적 파이프라인(Pipeline)을 구성한다.

### **5.1 알고리즘 실행 순서도 (Algorithmic Flowchart)**

1. **Step 0: 데이터 전처리 (Preprocessing)**  
   * 입력된 생년월일시를 60갑자로 변환.  
   * 절기(Solar Term) 계산 및 월지 지장간 사령 확인.  
2. **Step 1: 오행 세력표 생성 (Force Matrix Generation)**  
   * 기본 점수 할당 및 지장간 분해.  
   * 위치 가중치($W\_p$) 적용.  
   * 합·충 함수 실행 \-\> 동적 점수 보정(Dynamic Scoring).  
3. **Step 2: 특수격(Special Pattern) 필터링**  
   * 특정 오행이 전체 점수의 80% 이상인가? \-\> 종격(Follow Pattern) 로직으로 분기.  
   * 일간과 합하여 화기격(Transformation Pattern) 조건 충족인가? \-\> 화기격 로직으로 분기.  
4. **Step 3: 일반격 분석 (Normal Pattern Analysis)**  
   * **신강약 판별:** $Index\_{DM}$ 산출 및 등급 분류.  
   * **조후 검사:** 월지 기준 온도 지수 산출. $U\_{climate} \\ge 2.0$이면 조후 용신 Flag 활성화.  
   * **격국 식별:** 월지 투출자 확인 및 상신(Sangsin) 후보군 리스트업.  
5. **Step 4: 용신 경합 및 최적해 도출 (Conflict Resolution)**  
   * 후보 용신들을 한 테이블에 놓고 점수 매기기 (Weighted Scoring System).  
   * **점수 산식:** $FinalScore(E) \= Score\_{Eokbu} \+ (Score\_{Johu} \\times 1.5) \+ Score\_{Gyeokguk} \+ (Score\_{Tonggwan} \\times 1.3) \+ Score\_{Byeongyak}$  
   * 조후가 시급하면 조후 점수에 가중치, 통관이 필요하면 통관에 가중치 부여.  
   * 가장 높은 점수를 얻은 오행을 '제1용신', 그를 돕는 오행을 '희신', 방해하는 오행을 '기신'으로 확정.  
6. **Step 5: 결과 출력 (Output Generation)**  
   * JSON 포맷으로 구조화된 데이터 반환.  
   * 사용자 친화적 해석 텍스트 생성 (Natural Language Generation).

### **5.2 제언 및 결론**

본 보고서에서 설계한 알고리즘은 사주 명리학의 복잡한 추론 과정을 수치화 가능한 단위로 분해하고, 이를 논리적 흐름으로 재조립한 것이다. **오행 세력표의 벡터화**, **합충의 동적 보정**, **조후와 억부의 가중치 경합 모델**, 그리고 **격국 상신의 매트릭스화**는 기존의 단순 프로그램이 범하던 오류를 획기적으로 줄일 수 있다. 향후 이 모델은 실제 임상 데이터와의 비교를 통해 각 가중치 계수(Parameter)를 머신러닝으로 최적화함으로써, 더욱 정교한 예측 모델로 진화할 수 있을 것이다.