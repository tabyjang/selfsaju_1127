# 격국 판단 시스템 테스트 실행 가이드

## 🚀 빠른 시작

### 방법 1: Vite 개발 서버에서 실행 (권장)

```bash
# 1. 개발 서버 실행
npm run dev

# 2. 브라우저에서 http://localhost:5173 열기

# 3. 브라우저 콘솔(F12)에서 실행
import { runAllTests } from "./utils/geokguk.test.ts";
runAllTests();
```

### 방법 2: 테스트 페이지 컴포넌트 사용

`App.tsx`에 임시로 추가:

```tsx
import { GeokgukTestPage } from './components/GeokgukTestPage';

// App 컴포넌트 내부에
{process.env.NODE_ENV === 'development' && <GeokgukTestPage />}
```

## 📋 테스트 케이스 구성

### 총 50개 테스트 케이스

#### 기본 케이스 (14개)
- 왕지: 5개
- 생지: 8개
- 고지: 18개

#### 특수격 케이스 (7개)
- 양인격, 건록격, 월겁격
- 전왕격 (곡직인수격, 염상격)
- 화기격 (갑기화토격, 정임화목격)
- 종격 (종재격)

#### 합국 케이스 (4개)
- 삼합: 2개
- 방합: 1개
- 반합: 1개

#### 문서 케이스 (3개)
- TODO.md에 제시된 케이스

#### 엣지 케이스 (6개)
- 투출 없음
- 모든 지장간 투출
- 복잡한 경합 상황

## 🔍 주요 검증 항목

### 1. 투출 우선순위
- ✅ 생지: 본기 > 중기 > 여기(사월만)
- ✅ 고지: 본기(일간≠토) > 여기 > 중기

### 2. 일간=토 특수 처리
- ✅ 본기는 비겁이므로 격으로 불가
- ✅ 중기/여기가 격이 됨

### 3. 합국 우선순위
- ✅ 삼합/방합이 최우선
- ✅ 합화 오행이 격이 됨

### 4. 사월 무토 특례
- ✅ 사월만 무토 인정 (화토동법)
- ✅ 인월, 신월, 해월은 무토 불인정

### 5. 경합 해결
- ✅ 수량 비교 우선
- ✅ 사령일수 비교 (수량 동일 시)

## 📊 예상 결과

### 성공 케이스
- 판단가능: true
- 격명칭: 정확한 격국 명칭
- 격용신: 올바른 천간
- 격분류: '내격' 또는 '외격'

### 실패 케이스
- 판단가능: false
- 메시지: 구체적인 실패 이유
- 이유: 실패 원인 배열

## 🐛 문제 발견 시

1. **테스트 실패 로그 확인**
   - 예상값 vs 실제값 비교
   - 판단근거 필드 확인

2. **코드 디버깅**
   ```javascript
   // 개별 테스트 실행
   const sajuInfo = createTestSajuInfo('甲 子 丙 子 丙 午 戊 申');
   const result = analyzeGeokguk(sajuInfo);
   console.log(result);
   ```

3. **로직 검증**
   - 문서와 코드 로직 일치 확인
   - 우선순위 순서 확인

## 📝 테스트 결과 해석

### 성공 메시지 예시
```
✅ 성공
   격명칭: 정관격
   격용신: 癸
   격분류: 내격
   성격상태: 성격
   신뢰도: 95%
```

### 실패 메시지 예시
```
❌ 실패: 격명칭
   예상: 정관격
   실제: 편관격
```

## 💡 테스트 팁

1. **개별 테스트 실행**
   - 특정 케이스만 테스트하려면 해당 테스트만 주석 해제

2. **디버깅 모드**
   - `printTestResult` 함수에 `console.log` 추가하여 상세 로그 확인

3. **예상값 조정**
   - 일부 케이스는 여러 가능성이 있을 수 있으므로 예상값을 유연하게 설정

## 🔄 지속적인 테스트

새로운 기능 추가 시:
1. 해당 기능의 테스트 케이스 추가
2. 기존 테스트 재실행하여 회귀 테스트
3. 문서 업데이트

