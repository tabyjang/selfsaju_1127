# 격국 판단 시스템 테스트 케이스 요약

## 📊 테스트 케이스 총 50개

### Phase 2-1: 왕지(자오묘유) 테스트 (4개)
- Test 1: 자월 계수 정관격
- Test 2: 오월 정화 정재격
- Test 18: 묘월 을목 편인격
- Test 19: 유월 신금 정재격
- Test 38: 왕지 - 투출 없음 (본기 사용, 파격)

### Phase 2-2: 생지(인신사해) 테스트 (8개)
- Test 3: 인월 갑목 편인격 (본기 투출)
- Test 4: 인월 병화 건록격 (중기 투출)
- Test 5: 사월 무토 식신격 (여기 투출, 사월 특례)
- Test 6: 인월 무토 불인정 (본기로 이동)
- Test 20: 신월 경금 편재격 (본기 투출)
- Test 21: 신월 임수 편관격 (중기 투출)
- Test 22: 해월 임수 정관격 (본기 투출)
- Test 23: 해월 무토 불인정 (본기로 이동)
- Test 37: 생지 - 투출 없음 (본기 사용)
- Test 50: 생지 - 중기와 여기 모두 투출 (인월)

### Phase 2-3: 고지(진술축미) 테스트 (18개)
- Test 7: 진월 무토 편재격 (본기 투출, 일간≠토)
- Test 8: 진월 계수 정재격 (일간=토, 중기로)
- Test 9: 진월 을목 정인격 (여기만 투출)
- Test 10: 진월 계수 정관격 (중기만 투출)
- Test 11: 미월 을목 정인격 (여기중기 경합, 수량 승부)
- Test 12: 진월 을목 정인격 (여기중기 경합, 사령일수 승부)
- Test 13: 진월 투출 없음 (일간≠토, 본기 사용하되 미완성)
- Test 14: 진월 투출 없음 (일간=토, 격국 미정)
- Test 24: 미월 정화 상관격 (여기만 투출)
- Test 25: 미월 기토 정재격 (본기 투출, 일간≠토)
- Test 26: 미월 을목 정관격 (일간=토, 중기로)
- Test 27: 술월 신금 편재격 (여기만 투출)
- Test 28: 축월 계수 정재격 (여기만 투출)
- Test 35: 고지 - 모든 지장간 투출 (본기 우선)
- Test 36: 고지 - 일간=토, 본기만 투출, 중기여기 없음
- Test 39: 고지 - 여기중기 경합, 사령일수 승부
- Test 40: 오월 - 기토 중기 처리
- Test 47: 고지 - 본기와 여기 모두 투출, 일간=토
- Test 48: 고지 - 본기와 중기 모두 투출, 일간=토
- Test 49: 고지 - 본기여기중기 모두 투출, 일간=토

### Phase 1: 특수격 테스트 (7개)
- Test 15: 양인격 (양간 + 자오묘유)
- Test 16: 건록격 (인월 갑목)
- Test 17: 월겁격 (음간 + 겁재지)
- Test 41: 곡직인수격 (목 전왕격)
- Test 42: 염상격 (화 전왕격)
- Test 43: 갑기화토격
- Test 44: 정임화목격
- Test 45: 종재격

### 합국(會合) 테스트 (4개)
- Test 29: 진월 + 신자진 수국 (삼합)
- Test 30: 미월 + 해묘미 목국 (삼합)
- Test 31: 진월 + 인묘진 목방 (방합)
- Test 46: 반합 - 신자 반합 (월지+왕지)

### 문서 케이스 (3개)
- Test 32: Case 1 - 진월 + 임수 투간 + 자수 (성격)
- Test 33: Case 2 - 진월 + 무토 투간 + 자수 (갈등)
- Test 34: Case 3 - 미월 + 을목 투간 + 묘목

### 엣지 케이스 (6개)
- Test 35: 고지 - 모든 지장간 투출
- Test 36: 고지 - 일간=토, 본기만 투출, 중기여기 없음
- Test 37: 생지 - 투출 없음
- Test 38: 왕지 - 투출 없음
- Test 39: 고지 - 여기중기 경합, 사령일수 승부
- Test 40: 오월 - 기토 중기 처리

## 🎯 테스트 커버리지

### ✅ 완전 커버리지
- [x] 왕지 4개 모두 (자, 오, 묘, 유)
- [x] 생지 4개 모두 (인, 신, 사, 해)
- [x] 고지 4개 모두 (진, 술, 축, 미)
- [x] 투출 우선순위 (본기 > 중기 > 여기)
- [x] 일간=토 특수 케이스
- [x] 합국 (삼합, 방합)
- [x] 특수격 (전왕, 화기, 종격)
- [x] 건록격, 양인격, 월겁격

### ⚠️ 부분 커버리지
- [ ] 반합 (반합 로직 미구현)
- [ ] 가종격 (Phase 1-4 미구현)
- [ ] 충(沖), 극(剋) 로직 (향후 확장)

## 📝 테스트 실행 방법

```bash
# Vite 개발 서버 실행
npm run dev

# 브라우저 콘솔에서
import { runAllTests } from "./utils/geokguk.test.ts";
runAllTests();
```

## 🔍 주요 검증 포인트

1. **투출 우선순위**: 본기 > 중기 > 여기 (생지), 본기 > 여기 > 중기 (고지)
2. **일간=토 처리**: 본기는 비겁이므로 격으로 불가
3. **합국 우선순위**: 삼합/방합이 최우선
4. **사월 무토 특례**: 화토동법으로 무토 인정
5. **경합 해결**: 수량 > 사령일수 > 위치
6. **투출 없음 처리**: 왕지/생지는 본기 사용, 고지는 조건부

