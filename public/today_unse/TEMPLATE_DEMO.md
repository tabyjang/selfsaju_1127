# 템플릿 기반 운세 생성 시스템 - 데모

## 시스템 구조

### 1. 데이터 파일 구성
- **ilju_personalities.json** (60개): 각 일주의 고유 성격 특성
- **unseong_themes.json** (12개): 십이운성별 에너지 테마
- **fortune_templates.json** (150+개): 조합 가능한 문장 템플릿
- **holiday_messages.json** (15개): 특별한 날 메시지
- **ilju_interactions.json** (3,600개): 내일주 × 오늘일주 상호작용 힌트 (예정)

### 2. 운세 생성 로직

```
최종 운세 =
  IF (오늘이 공휴일/특별한날) THEN
    holiday_message (일주 특성 반영)
  ELSE
    제목 (unseong 에너지 기반) +
    오프닝 (ilju + unseong 조합) +
    메인1 (work/relationship/opportunity 중 선택) +
    메인2 (decision/health/learning 중 선택) +
    주의사항 (unseong 기반) +
    클로징 (에너지 레벨 기반) +
    액션플랜 3개 (에너지 레벨 기반)
```

### 3. ME (Mental Energy) 계산

```
기본 ME = unseong.AE
IF 득령 THEN ME += 1
IF 귀인 O AND (십성 == 비견 OR 십성 == 겁재) THEN ME += 1

에너지 레벨 분류:
- ME 6-7: high_energy (적극적, 긍정적)
- ME 4-5: medium_energy (균형적, 안정적)
- ME 2-3: low_energy (휴식, 내면 집중)
```

---

## 실제 생성 예시

### 예시 1: 기축일주 × 장생 운성 (득령, 귀인 X)

#### 입력 데이터:
```json
일주: 기축 (己丑)
- 핵심특성: "차분하고 신중한"
- 강점: "책임감, 인내심, 꼼꼼함, 안정성"
- 소통스타일: "신중하게 말을 고르는"
- 감정표현: "겉으로 드러내지 않지만 깊은"
- 업무스타일: "체계적으로 준비하는"
- 추가특징: "한번 시작하면 끝을 보는 성향..."

운성: 장생
- AE: 4
- 에너지단계: "탄생"
- 핵심키워드: "시작, 활력, 새출발, 생명력"
- 분위기: "뭔가 새롭게 시작하고 싶은"
- 조언톤: "지금이 시작할 타이밍입니다"

득령: O (ME = 4 + 1 = 5) → medium_energy
귀인: X
```

#### 생성된 운세:

**[차근차근 쌓아가는 시작]**

오늘은 뭔가 새롭게 시작하고 싶은 하루가 될 것 같습니다. 차분하고 신중한 당신이라면 충분히 잘 해낼 수 있어요.

체계적으로 준비하는 당신의 스타일을 유지하되, 오늘은 너무 조급해하지 마세요. 평소 책임감, 인내심, 꼼꼼함, 안정성을 발휘하던 방식 그대로 하시면 됩니다.

결정을 해야 한다면, 신중하게 말을 고르는 당신답게 충분히 검토한 후 진행하세요. 지금이 시작할 타이밍입니다 - 준비 단계 다지기.

오늘처럼 뭔가 새롭게 시작하고 싶은 날이라면, 무리한 활동을 피하고 재충전하세요. 몸을 적극적으로 움직이는 게 도움이 됩니다.

**차분하고 신중한 당신이라면 충분합니다.**

오늘의 액션플랜:
- 이번 주 중요한 일정 3가지 확인하기
- 진행 중인 일의 중간 점검하기
- 가벼운 산책이나 스트레칭하기

---

### 예시 2: 계묘일주 × 목욕 운성 (실령, 귀인 X)

#### 입력 데이터:
```json
일주: 계묘 (癸卯)
- 핵심특성: "섬세하고 감성적인"
- 강점: "직관력, 예술성, 공감능력, 섬세함"
- 소통스타일: "부드럽게 공감하며 말하는"
- 감정표현: "감정을 예술로 승화시키는"
- 업무스타일: "영감을 따라 창의적으로 하는"
- 추가특징: "감수성이 풍부하고 우아함을 추구..."

운성: 목욕
- AE: 5
- 에너지단계: "정화"
- 핵심키워드: "변화, 정화, 감정기복, 민감함"
- 분위기: "마음이 요동치는"
- 주의사항: "감정에 휘둘려 충동적인 결정을 내리지 마세요"

득령: X (ME = 5 - 1 = 4) → medium_energy
귀인: X
```

#### 생성된 운세:

**[마음이 출렁이는 하루]**

오늘은 마음이 요동치는 날입니다. 섬세하고 감성적인 당신이라면, 오히려 이럴 때 더 신중할 수 있죠.

영감을 따라 창의적으로 하는 당신의 방식을 유지하되, 오늘은 감정에 휘둘려 충동적인 결정을 내리지 마세요. 평소 직관력, 예술성, 공감능력, 섬세함을 발휘하는 당신이지만, 오늘은 마음이 요동치는 날입니다. 무리하지 마세요.

섬세하고 감성적인 당신이지만, 오늘은 조금 더 신중하게 말을 고르는 게 좋겠습니다. 감정에 휘둘려 충동적인 결정을 내리지 마세요.

오늘은 마음이 요동치는 날이라 창의적인 아이디어가 떠오를 수 있습니다. 직관력, 예술성, 공감능력, 섬세함을 활용해 보세요.

급한 결정은 조금 미뤄도 좋겠습니다. 변화는 자연스러운 것입니다. 섬세하고 감성적인 당신이라면 기다림도 전략입니다.

**섬세하고 감성적인 당신답게 자신에게 친절하세요.**

오늘의 액션플랜:
- 오늘 해보면 좋은 일: 변화, 정화, 감정기복, 민감함에 대해 생각해 보기
- 진행 중인 일의 중간 점검하기
- 일기 쓰거나 생각 정리하기

---

### 예시 3: 병인일주 × 제왕 운성 (득령, 귀인 X)

#### 입력 데이터:
```json
일주: 병인 (丙寅)
- 핵심특성: "열정적이고 창의적인"
- 강점: "추진력, 창의성, 카리스마, 긍정성"
- 소통스타일: "열띠게 말하는"
- 감정표현: "감정을 숨기지 않고 표현하는"
- 업무스타일: "빠르게 시작하고 강하게 밀어붙이는"
- 추가특징: "불같은 성격으로 아이디어가 풍부..."

운성: 제왕
- AE: 7
- 에너지단계: "정점"
- 핵심키워드: "권력, 완성, 정점, 주도"
- 분위기: "모든 것이 손안에 있는 것 같은"
- 조언톤: "당신의 영향력을 발휘할 때입니다"
- 주의사항: "교만하지 말고 겸손함을 유지하세요"

득령: O (ME = 7 + 1 = 8 → cap at 7) → high_energy
귀인: X
```

#### 생성된 운세:

**[당신다운 빛을 발하는 날]**

오늘은 모든 것이 손안에 있는 것 같은 날입니다. 열정적이고 창의적인 당신이라면, 이런 날을 어떻게 보낼까요?

빠르게 시작하고 강하게 밀어붙이는 당신의 스타일이 오늘 특히 빛을 발할 것 같습니다. 리드하고 이끌어가는 마음이 든다면, 그 본능을 따라가 보세요.

오늘은 누군가의 마음을 움직일 수 있는 날이라 대화가 잘 통할 것 같습니다. 감정을 숨기지 않고 표현하는 당신답게 마음을 전해보세요.

결정을 미루고 있었다면, 당신의 영향력을 발휘할 때입니다. 열정적이고 창의적인 당신의 판단을 믿으세요.

다만 오늘은 교만하지 말고 겸손함을 유지하세요. 열정적이고 창의적인 당신이라도 이 점은 주의하세요.

**열정적이고 창의적인 당신에게 오늘은 멋진 하루가 될 거예요!**

오늘의 액션플랜:
- 미루던 일 중 하나를 오늘 시작해 보세요
- 추진력, 창의성, 카리스마, 긍정성을 활용할 수 있는 프로젝트에 도전하기
- 새로운 사람을 만나거나 네트워킹 기회를 만들어 보세요

---

## 시스템의 강점

### 1. 높은 변별력
- 60 일주 × 12 운성 = 720 기본 조합
- 득령/실령 구분 = 1,440 조합
- 150+ 템플릿 × 5 버전 (시드 기반) = 실질적으로 무한대의 조합

### 2. 관리 용이성
- 핵심 데이터: 60 + 12 + 150 + 15 = 237개 항목만 관리
- 18,000개가 아닌 237개로 전체 시스템 운영
- 템플릿 수정 시 모든 조합에 자동 반영

### 3. 자연스러운 문장
- 플레이스홀더 치환 방식: `{ilju.핵심특성}` → "차분하고 신중한"
- 실제 사람이 쓴 것처럼 자연스러운 흐름
- 일주의 특성이 문장 전체에 녹아있음

### 4. 확장 가능성
- 새로운 템플릿 추가 용이
- 특별한 날 메시지 쉽게 추가
- 시즌별, 이벤트별 커스터마이징 가능

---

## 다음 단계

### 구현 필요 사항:
1. ✅ `ilju_personalities.json` - 완료
2. ✅ `unseong_themes.json` - 완료
3. ✅ `fortune_templates.json` - 완료
4. ✅ `holiday_messages.json` - 완료
5. ⏳ `ilju_interactions.json` (3,600개) - 간단한 힌트만 필요
6. ⏳ 템플릿 조합 로직 구현 (TypeScript/JavaScript)
7. ⏳ 시드 기반 버전 선택 로직 (날짜 기반)
8. ⏳ 득령/실령 판단 로직 연동
9. ⏳ 공휴일 체크 로직

### 추가 고려사항:
- A/B 테스팅을 위한 여러 템플릿 버전 준비
- 사용자 피드백 기반 템플릿 개선 시스템
- 계절별 특성 추가 (봄/여름/가을/겨울 키워드)
