import json
import sys
import io
import re

# UTF-8 인코딩 강제 설정
sys.stdout = io.TextIOWrapper(sys.stdout.buffer, encoding='utf-8')

with open('today_unse/stories/12_을해.json', 'r', encoding='utf-8') as f:
    data = json.load(f)

# 본문 내용을 읽고 그에 맞는 액션 작성
# 각 본문의 핵심을 보완하고 강조하는 액션

custom_actions = {
    # 장생
    ("장생", 1): "시작하세요. 차분하게 사람들에게 다가가며, 좋은 반응을 이끌어내세요.",
    ("장생", 2): "행동하세요. 몰입력과 유연한 적응력을 발휘해, 함께하고 싶은 사람이 되세요.",
    ("장생", 3): "감사하세요. 사려 깊게 다가가 받은 후원에, 초연하게 마음을 전하세요.",
    ("장생", 4): "밀어붙이세요. 고결한 본질로 솔직하게 표현하며, 응원받는 사람이 되세요.",
    ("장생", 5): "회복하세요. 평정심으로 긍정적 에너지를 받아들여, 빠르게 활력을 되찾으세요.",
    ("장생", 6): "소통하세요. 철학적 사고로 매력을 어필하며, 자신감 있게 연결되세요.",
    ("장생", 7): "성장하세요. 철학적 통찰을 믿고 꾸준히 나아가, 큰 결실을 맺으세요.",
    ("장생", 8): "나아가세요. 진흙 속에서도 고결함을 잃지 않고, 지혜를 깨워 세상으로 나가세요.",
    ("장생", 9): "흡수하세요. 스펀지처럼 새로운 지식을 받아들여, 하나를 배워 열을 깨우치세요.",
    ("장생", 10): "출항하세요. 자유로운 영혼으로 새로운 곳에 떠날 용기를 내, 유연하게 적응하세요.",

    # 목욕
    ("목욕", 1): "즐기세요. 예민해진 오감으로 아름다움을 경험하며, 순간을 차분히 음미하세요.",
    ("목욕", 2): "발산하세요. 직관적으로 다가가 매력을 최고조로 드러내며, 좋은 인상을 남기세요.",
    ("목욕", 3): "시도하세요. 담백한 태도로 평소와 다른 선택을 해, 신선한 자극을 받으세요.",
    ("목욕", 4): "조절하세요. 감정 기복을 순수하게 느끼되 과하지 않게, 집중력으로 균형을 잡으세요.",
    ("목욕", 5): "돌보세요. 초연한 자세로 나만의 방식으로, 진솔하게 자신에게 집중하세요.",
    ("목욕", 6): "믿으세요. 날카로워진 직관과 평정심으로 판단해, 정확한 통찰을 얻으세요.",
    ("목욕", 7): "전달하세요. 진솔하고 우아한 표현력으로, 부드럽게 품격을 유지하며 감탄받으세요.",
    ("목욕", 8): "관찰하세요. 날카로운 통찰력으로 본질을 파악하되, 적당한 둔감함도 유지하세요.",
    ("목욕", 9): "드러내세요. 차가운 이성 속 따뜻한 인류애를, 온기 있는 사람으로 나타내세요.",
    ("목욕", 10): "준비하세요. 고결하고 깨끗한 본질이 세상에 드러날, 활짝 피어날 순간을 기다리세요.",

    # 관대
    ("관대", 1): "성장하세요. 혜안이 한 단계 성장하는 오늘, 차분히 도전을 받아들여 협력하세요.",
    ("관대", 2): "나아가세요. 준비해온 것들이 결실 맺기 시작하니, 통찰력과 자신감으로 나아가세요.",
    ("관대", 3): "완수하세요. 주어진 역할에 책임감을 느끼며, 성실히 맡은 일을 해내 신뢰를 얻으세요.",
    ("관대", 4): "나누세요. 인정받는 순간을 겸손히 받아들이며, 조용히 기쁨을 나누고 더 나아가세요.",
    ("관대", 5): "자립하세요. 강해진 독립심으로 몰입해 판단하고, 주도적으로 움직여 자유를 얻으세요.",
    ("관대", 6): "드러내세요. 갈고닦은 실력을 사색하는 마음으로 발휘해, 협력하며 시너지를 내세요.",
    ("관대", 7): "다지세요. 확고해진 자리를 성실히 노력해, 부드러운 강인함으로 기반을 다지세요.",
    ("관대", 8): "완성하세요. 철학적 깊이로 지혜와 책임감을 모두 갖춘, 완성된 모습을 이루세요.",
    ("관대", 9): "전진하세요. 고요한 결단력으로 원칙을 세우며, 침착하게 한 걸음씩 나아가세요.",
    ("관대", 10): "준비하세요. 관대의 안정 속에서 깊은 통찰로, 완벽하게 준비를 마무리하세요.",

    # 건록
    ("건록", 1): "유지하세요. 안정된 리듬을 평정심으로 지키며, 꾸준히 페이스를 유지하세요.",
    ("건록", 2): "보여주세요. 깊이 쌓은 실력을 깊이 있게 발휘해, 확실히 능력을 입증하세요.",
    ("건록", 3): "해결하세요. 스스로 문제를 풀어내는 힘으로, 차분히 자급자족하세요.",
    ("건록", 4): "누리세요. 근면한 노력의 결실을 당당히 거두며, 성취감을 만끽하세요.",
    ("건록", 5): "맞추세요. 일과 휴식의 균형을 지혜롭게 조화시키며, 중도를 유지하세요.",
    ("건록", 6): "인정받으세요. 전문성을 묵묵히 쌓아 올리며, 주변의 존경을 얻으세요.",
    ("건록", 7): "쌓으세요. 철저히 기반을 다지며, 차근차근 단단한 토대를 만드세요.",
    ("건록", 8): "몰입하세요. 집중력을 깊이 발휘해 일에 빠져들며, 내실을 탄탄히 다지세요.",
    ("건록", 9): "지키세요. 고요히 원칙을 따르며, 흔들림 없이 안정을 유지하세요.",
    ("건록", 10): "완성하세요. 건록의 힘으로 실력을 완벽히 갖춰, 확고한 자리를 만드세요.",

    # 제왕
    ("제왕", 1): "누리세요. 최고조에 달한 순간을 평정심으로, 당당히 만끽하세요.",
    ("제왕", 2): "이끄세요. 리더십을 발휘해 사람들을 지혜롭게, 앞장서서 인도하세요.",
    ("제왕", 3): "즐기세요. 완벽한 컨디션으로 오늘을 마음껏, 최고의 순간으로 만드세요.",
    ("제왕", 4): "펼치세요. 영향력을 차분히 넓히며, 책임감 있게 확대하세요.",
    ("제왕", 5): "나누세요. 성취의 정점에서 평정심으로 성과를 즐기며, 겸손히 기쁨을 나누세요.",
    ("제왕", 6): "표현하세요. 자신감을 깊이 있게 드러내며, 품격 있게 당당함을 보이세요.",
    ("제왕", 7): "감동시키세요. 카리스마를 발산하며 사람들을, 진심으로 이끌고 감화시키세요.",
    ("제왕", 8): "실현하세요. 철학적 비전을 현실로 만들어, 의미 있게 완성하세요.",
    ("제왕", 9): "주도하세요. 고요한 카리스마로 상황을 차분히, 중심을 잡고 이끌어가세요.",
    ("제왕", 10): "완성하세요. 제왕의 기운으로 비전을 완벽히 구현해, 최고의 결과를 만드세요.",

    # 쇠
    ("쇠", 1): "누리세요. 느긋한 마음으로 평온한 하루를, 여유롭게 보내세요.",
    ("쇠", 2): "사색하세요. 깊이 있는 지혜를 생각하며, 통찰을 얻고 판단하세요.",
    ("쇠", 3): "추구하세요. 차분히 평온함을 찾으며, 안정 속에서 중심을 잡으세요.",
    ("쇠", 4): "활용하세요. 노련한 지혜를 적절히 발휘해, 상황에 맞게 사용하세요.",
    ("쇠", 5): "챙기세요. 실속을 알뜰히 따지며, 확실히 실리를 챙기세요.",
    ("쇠", 6): "유지하세요. 신념을 은근히 고집하며, 흔들리지 않고 지켜가세요.",
    ("쇠", 7): "쉬세요. 필요한 휴식을 충분히 취하며, 몸과 마음을 깊이 재충전하세요.",
    ("쇠", 8): "숙고하세요. 사려 깊게 생각하며, 차분히 결정을 내리세요.",
    ("쇠", 9): "지키세요. 고요한 안정 속에서 평온을, 담담히 유지하세요.",
    ("쇠", 10): "정리하세요. 여유롭게 쇠의 지혜로, 필요한 것만 남겨 간결하게 하세요.",

    # 병
    ("병", 1): "관찰하세요. 예민해진 감각으로 세상을, 섬세하게 느끼고 살피세요.",
    ("병", 2): "펼치세요. 풍부한 상상력으로 가능성을, 자유롭게 그려보세요.",
    ("병", 3): "이해하세요. 동정심을 발휘해 타인을, 따뜻하게 공감하고 품으세요.",
    ("병", 4): "창조하세요. 예술적 감성으로 아름다움을, 표현하고 만들어내세요.",
    ("병", 5): "나누세요. 다정다감한 마음을, 아낌없이 베풀고 사랑하세요.",
    ("병", 6): "떠나세요. 역마의 기운을 타고 새로운 곳으로, 자유롭게 이동하세요.",
    ("병", 7): "키우세요. 정신적 깊이를 추구하며, 사색으로 내면을 성장시키세요.",
    ("병", 8): "위로하세요. 따뜻한 마음으로 상처를, 부드럽게 감싸고 치유하세요.",
    ("병", 9): "탐구하세요. 철학적 사유에 깊이 빠져들며, 진리를 찾아가세요.",
    ("병", 10): "받아들이세요. 고요한 감수성으로 세상을, 온전히 느끼고 품으세요.",

    # 사
    ("사", 1): "마무리하세요. 깔끔하게 정리하며, 완결을 향해 마침표를 찍으세요.",
    ("사", 2): "성찰하세요. 내면으로 깊이 들어가, 자신을 돌아보고 이해하세요.",
    ("사", 3): "종결하세요. 담담하게 마무리하며, 새로운 시작을 차분히 준비하세요.",
    ("사", 4): "들으세요. 평온함 속에서 고요히, 내면의 소리에 귀 기울이세요.",
    ("사", 5): "정산하세요. 차분히 정리하며 다음을, 차근차근 준비하세요.",
    ("사", 6): "쉬세요. 잠시 멈춰 서며 지혜를, 되새기고 충전하세요.",
    ("사", 7): "비우세요. 불필요한 것을 내려놓고, 마음을 가볍게 정돈하세요.",
    ("사", 8): "완결하세요. 철학적 통찰로 끝을, 의미 있게 맺으세요.",
    ("사", 9): "내려놓으세요. 고요히 손을 떼며, 새로운 시작을 위해 비워두세요.",
    ("사", 10): "마치세요. 사의 지혜로 마무리를, 깔끔하게 완성하세요.",

    # 묘
    ("묘", 1): "키우세요. 잠재된 힘을 조용히 품으며, 내면에 차곡차곡 쌓으세요.",
    ("묘", 2): "집중하세요. 내면의 성장에 몰두하며, 차분히 실력을 쌓으세요.",
    ("묘", 3): "저장하세요. 에너지를 아껴두며, 미래를 위해 비축하세요.",
    ("묘", 4): "준비하세요. 조용히 차근차근, 보이지 않게 힘을 쌓으세요.",
    ("묘", 5): "축적하세요. 깊이 침잠하며 지혜를, 차분히 모아가세요.",
    ("묘", 6): "발견하세요. 숨겨진 가치를 천천히, 인내심으로 찾아내세요.",
    ("묘", 7): "쌓으세요. 꾸준히 축적하며 기반을, 탄탄히 다져가세요.",
    ("묘", 8): "기다리세요. 철학적 인내로 때를, 고요히 준비하며 기다리세요.",
    ("묘", 9): "간직하세요. 소중한 것을 차분히, 잘 보존하고 지키세요.",
    ("묘", 10): "품으세요. 묘의 기운으로 씨앗을, 조용히 키우고 보듬으세요.",

    # 절
    ("절", 1): "시작하세요. 마음을 깨끗이 비우고, 산뜻하게 새로 출발하세요.",
    ("절", 2): "선택하세요. 쿨하게 과감히, 망설임 없이 결정하세요.",
    ("절", 3): "리셋하세요. 인생을 새롭게 정리하고, 다시 시작하세요.",
    ("절", 4): "비우세요. 뒤끝 없이 깨끗하게, 마음을 정리하고 가볍게 하세요.",
    ("절", 5): "맞이하세요. 반전의 기운을 믿고, 새로운 시작을 기대하세요.",
    ("절", 6): "출발하세요. 순수한 마음으로, 처음처럼 나아가세요.",
    ("절", 7): "날아가세요. 자유로운 영혼으로, 구애 없이 떠나세요.",
    ("절", 8): "정리하세요. 철학적 결단으로 과거를, 깔끔히 마무리하세요.",
    ("절", 9): "자유로워지세요. 고요히 집착을 내려놓고, 홀가분해지세요.",
    ("절", 10): "나아가세요. 절의 지혜로 과거를 끊고, 미래로 힘차게 나아가세요.",

    # 태
    ("태", 1): "품으세요. 잉태의 기운으로 씨앗을, 조용히 소중하게 키우세요.",
    ("태", 2): "준비하세요. 시작을 신중히, 차근차근 준비하세요.",
    ("태", 3): "자라세요. 조용한 성장에 집중하며, 내실을 탄탄히 다지세요.",
    ("태", 4): "심으세요. 좋은 씨앗을 정성껏, 미래를 위해 심으세요.",
    ("태", 5): "보호하세요. 소중한 것을 애정으로, 잘 지키고 돌보세요.",
    ("태", 6): "기대하세요. 가능성을 믿으며, 희망을 키우고 바라세요.",
    ("태", 7): "이어가세요. 숨은 준비를 차분히, 꾸준히 계속하세요.",
    ("태", 8): "가꾸세요. 철학의 씨앗을 정성껏, 조용히 키우고 보살피세요.",
    ("태", 9): "기다리세요. 고요히 생명을 키우며, 때를 인내심으로 기다리세요.",
    ("태", 10): "잉태하세요. 태의 지혜로 새로움을, 조용히 품고 준비하세요.",

    # 양
    ("양", 1): "돌보세요. 정성껏 양육하며, 성장을 애정으로 도우세요.",
    ("양", 2): "키우세요. 성장의 기운으로 가능성을, 아낌없이 지원하세요.",
    ("양", 3): "베푸세요. 필요한 도움을, 아낌없이 제공하고 나누세요.",
    ("양", 4): "나누세요. 지혜를 함께 나누며 성장을, 같이 이루세요.",
    ("양", 5): "이끄세요. 꾸준한 노력으로, 성장과 발달을 이끌어가세요.",
    ("양", 6): "보살피세요. 세심하게 돌보며, 애정을 듬뿍 쏟으세요.",
    ("양", 7): "기다리세요. 꾸준히 인내하며, 성과를 차분히 기다리세요.",
    ("양", 8): "돕으세요. 철학적 애정으로 성장을, 지혜롭게 지원하세요.",
    ("양", 9): "지켜보세요. 고요히 성장을 인내하며, 때를 기다리세요.",
    ("양", 10): "완성하세요. 양의 기운으로 양육을, 온전히 마무리하세요.",
}

fixed_text = 0
fixed_action = 0

for unsung_name, fortunes in data['운세'].items():
    for fortune in fortunes:
        # 본문 오타 수정
        if '본문' in fortune:
            original = fortune['본문']
            본문 = original

            # 오타 수정
            본문 = re.sub(r'체계적으로로', '체계적으로', 본문)
            본문 = re.sub(r'순수하게하되', '순수하게 하되', 본문)
            본문 = re.sub(r'깊이 파고들어를', '깊이 파고드는 태도를', 본문)
            본문 = re.sub(r'연구하듯로', '연구하듯이', 본문)

            # 로로 패턴
            본문 = re.sub(r'([가-힣]+)로로', r'\1로', 본문)

            if 본문 != original:
                fortune['본문'] = 본문
                fixed_text += 1

        # 액션 교체
        if '액션' in fortune:
            key = (unsung_name, fortune['v'])
            if key in custom_actions:
                fortune['액션'] = custom_actions[key]
                fixed_action += 1

with open('today_unse/stories/12_을해.json', 'w', encoding='utf-8') as f:
    json.dump(data, f, ensure_ascii=False, indent=2)

print(f"{'='*60}")
print(f"✅ 12_을해.json 정성스럽게 재작성 완료!")
print(f"{'='*60}")
print(f"  본문 오타 수정: {fixed_text}개")
print(f"  액션 재작성 (본문 보완·강조): {fixed_action}개")
print(f"{'='*60}")
