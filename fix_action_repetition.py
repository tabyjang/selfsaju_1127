#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
액션 플랜 템플릿에서 핵심특성 반복 제거
"""

import re

# 파일 읽기
with open('utils/fortuneTemplate/eventFortuneGenerator.ts', 'r', encoding='utf-8') as f:
    content = f.read()

# 액션 플랜에서 핵심특성 제거 (10개 중 2-3개만 남기고 나머지 제거)
replacements = [
    # 월요일 - 대부분 제거
    (r"`\$\{iljuData\.핵심특성\} 당신, 이번 주 목표 명확히 정하기`", "`이번 주 목표 명확히 정하기`"),
    (r"`\$\{iljuData\.업무스타일\} 방식으로 우선순위 정리하기`", "`우선순위 정리하기`"),
    (r"`\$\{iljuData\.소통스타일\} 당신, 월요일 아침 루틴 확립하기`", "`월요일 아침 루틴 확립하기`"),
    (r"`\$\{iljuData\.감정표현\} 당신답게 한 주 동안 집중할 핵심 정하기`", "`한 주 동안 집중할 핵심 정하기`"),

    # 화요일 - 대부분 제거
    (r"`\$\{iljuData\.핵심특성\} 당신, 오늘은 실행에 집중하기`", "`오늘은 실행에 집중하기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신, 가장 중요한 일부터 처리하기`", "`가장 중요한 일부터 처리하기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신답게 리듬 찾아가기`", "`당신답게 리듬 찾아가기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신, 집중력 최고조로 끌어올리기`", "`집중력 최고조로 끌어올리기`"),

    # 수요일
    (r"`\$\{iljuData\.핵심특성\} 당신답게 진행 상황 체크하기`", "`진행 상황 체크하기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신, 방향 재설정할 시간 갖기`", "`방향 재설정할 시간 갖기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신답게 균형 찾기`", "`당신답게 균형 찾기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신, 주중 피로 풀 방법 찾기`", "`주중 피로 풀 방법 찾기`"),

    # 목요일
    (r"`\$\{iljuData\.핵심특성\} 당신, 주말 전 완료할 것 정리하기`", "`주말 전 완료할 것 정리하기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신, 금요일 전 해결할 것 우선순위 매기기`", "`금요일 전 해결할 것 우선순위 매기기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신답게 주말 계획 미리 세우기`", "`당신답게 주말 계획 미리 세우기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신, 주말까지 에너지 관리하기`", "`주말까지 에너지 관리하기`"),

    # 금요일
    (r"`\$\{iljuData\.핵심특성\} 당신, 다음 주 준비하며 마무리하기`", "`다음 주 준비하며 마무리하기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신, 미완료 항목 다음 주로 이월하기`", "`미완료 항목 다음 주로 이월하기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신답게 주말 재충전 계획 세우기`", "`당신답게 주말 재충전 계획 세우기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신, 다음 주 월요일 준비 가볍게 하기`", "`다음 주 월요일 준비 가볍게 하기`"),

    # 토요일
    (r"`\$\{iljuData\.핵심특성\} 당신, 평소 못했던 활동 해보기`", "`평소 못했던 활동 해보기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신답게 집 정리하며 마음 정돈하기`", "`당신답게 집 정리하며 마음 정돈하기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신, 운동하며 몸과 마음 리프레시하기`", "`운동하며 몸과 마음 리프레시하기`"),

    # 일요일
    (r"`\$\{iljuData\.핵심특성\} 당신, 다음 주를 위한 에너지 충전하기`", "`다음 주를 위한 에너지 충전하기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신답게 좋아하는 책이나 영화 즐기기`", "`당신답게 좋아하는 책이나 영화 즐기기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신, 다음 주 간단히 미리보기`", "`다음 주 간단히 미리보기`"),

    # 카테고리별 액션 - 인연
    (r"`\$\{iljuData\.핵심특성\} 당신, 오늘 만나는 사람들과 진심으로 소통하기`", "`오늘 만나는 사람들과 진심으로 소통하기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신답게 새로운 인연에 열린 마음으로 다가가기`", "`당신답게 새로운 인연에 열린 마음으로 다가가기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신, 관계에서 진정성 보여주기`", "`관계에서 진정성 보여주기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신, 오늘 만난 사람에게 긍정 에너지 전하기`", "`오늘 만난 사람에게 긍정 에너지 전하기`"),

    # 재미
    (r"`\$\{iljuData\.핵심특성\} 당신, 평소 안 가던 새로운 곳 탐험해보기`", "`평소 안 가던 새로운 곳 탐험해보기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신답게 여유롭게 시간 보내기`", "`당신답게 여유롭게 시간 보내기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신, 일상 속 작은 재미 발견하기`", "`일상 속 작은 재미 발견하기`"),

    # 행운
    (r"`\$\{iljuData\.핵심특성\} 당신답게 긍정적인 마인드로 하루 시작하기`", "`당신답게 긍정적인 마인드로 하루 시작하기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신, 행운을 끌어당기는 태도 유지하기`", "`행운을 끌어당기는 태도 유지하기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신답게 행운의 신호 알아채기`", "`당신답게 행운의 신호 알아채기`"),

    # 영감
    (r"`\$\{iljuData\.핵심특성\} 당신, 떠오르는 아이디어 바로 메모하기`", "`떠오르는 아이디어 바로 메모하기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신, 관심 분야 조금이라도 공부해보기`", "`관심 분야 조금이라도 공부해보기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신, 평소와 다른 루틴으로 자극 받기`", "`평소와 다른 루틴으로 자극 받기`"),

    # 도전
    (r"`\$\{iljuData\.핵심특성\} 당신답게 평소 망설이던 제안 용기내서 말하기`", "`평소 망설이던 제안 용기내서 말하기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신, 새로운 목표 설정하고 첫걸음 떼기`", "`새로운 목표 설정하고 첫걸음 떼기`"),
    (r"`\$\{iljuData\.핵심특성\} 당신답게 한계 뛰어넘기`", "`당신답게 한계 뛰어넘기`"),
]

# 순차적으로 교체
changes = 0
for pattern, replacement in replacements:
    if re.search(pattern, content):
        content = re.sub(pattern, replacement, content)
        changes += 1

# 파일 저장
with open('utils/fortuneTemplate/eventFortuneGenerator.ts', 'w', encoding='utf-8') as f:
    f.write(content)

print(f"[DONE] Removed {changes} trait repetitions from action plans")
