import json
import re

# 파일 읽기
with open('today_unse/stories/05_갑신.json', 'r', encoding='utf-8') as f:
    data = json.load(f)

# 모든 운세 메시지 처리
for unsung_name, fortunes in data['운세'].items():
    for fortune in fortunes:
        if '본문' in fortune:
            본문 = fortune['본문']

            # 1. 부사 + 방식 → 형용사 + 방식
            본문 = re.sub(r'단도직입적으로\s+방식', '단도직입적인 방식', 본문)
            본문 = re.sub(r'설득력 있게\s+방식', '설득력 있는 방식', 본문)
            본문 = re.sub(r'쿨하게\s+방식', '쿨한 방식', 본문)
            본문 = re.sub(r'당당하게\s+방식', '당당한 방식', 본문)
            본문 = re.sub(r'결단력 있게\s+방식', '결단력 있는 방식', 본문)
            본문 = re.sub(r'명확하게\s+방식', '명확한 방식', 본문)
            본문 = re.sub(r'직설적으로\s+방식', '직설적인 방식', 본문)
            본문 = re.sub(r'카리스마 있게\s+방식', '카리스마 있는 방식', 본문)

            # 2. 조사 중복 제거: "~~하게이" → "~~한 것이"
            본문 = re.sub(r'담백하게이', '담백한 마음이', 본문)
            본문 = re.sub(r'당당하게이', '당당한 표현이', 본문)
            본문 = re.sub(r'단도직입적으로이', '단도직입적인 말이', 본문)
            본문 = re.sub(r'결단력 있게이', '결단력이', 본문)

            # 3. 조사 중복 제거: "~~하게을" → "~~한 것을"
            본문 = re.sub(r'쿨하게을', '쿨했던 것을', 본문)
            본문 = re.sub(r'책임감 있게을', '책임감 있는 방식을', 본문)
            본문 = re.sub(r'효율적으로을', '효율적인 방식을', 본문)
            본문 = re.sub(r'전략적으로을', '전략적인 방식을', 본문)
            본문 = re.sub(r'결단력 있게을', '결단력 있는 방식을', 본문)

            # 4. 조사 중복 제거: "~~하게에" → "~~하게"
            본문 = re.sub(r'명확하게에', '명확하게 말하는 것에', 본문)
            본문 = re.sub(r'진심으로에', '진심으로 표현하는 것에', 본문)
            본문 = re.sub(r'카리스마 있게에', '카리스마 있게', 본문)
            본문 = re.sub(r'쿨하게에', '쿨하게', 본문)
            본문 = re.sub(r'빈틈없이에', '빈틈없이', 본문)

            # 5. 조사 중복 제거: "~~하게로" → "~~하게"
            본문 = re.sub(r'결단력 있게로', '결단력 있게', 본문)
            본문 = re.sub(r'카리스마로로', '카리스마로', 본문)

            # 6. 조사 중복 제거: "~~하게의" → "~~한 표현의"
            본문 = re.sub(r'솔직하게의', '솔직한 표현의', 본문)
            본문 = re.sub(r'직설적으로의', '직설적인 표현의', 본문)
            본문 = re.sub(r'책임감 있게의', '책임감 있는 방식의', 본문)

            # 7. 중복 문자 제거
            본문 = re.sub(r'당신만의의', '당신만의', 본문)
            본문 = re.sub(r'정리도도', '정리도', 본문)
            본문 = re.sub(r'감정이이', '감정이', 본문)
            본문 = re.sub(r'빈틈없이이', '빈틈없이', 본문)
            본문 = re.sub(r'발휘하면면', '발휘하면', 본문)

            # 8. "~~하게, 마음을" 같은 어색한 패턴
            본문 = re.sub(r'고고하게,\s*\n\s*마음을 표현하세요', '고고한 당신,\n마음을 표현하세요', 본문)
            본문 = re.sub(r'쿨해 보여도 따뜻하게,', '쿨해 보여도 따뜻한 당신,', 본문)
            본문 = re.sub(r'다재다능하게,\s*\n\s*기대하세요', '다재다능한 당신,\n기대하세요', 본문)

            # 9. "의리 있게\n진정성 있게" 같은 중복
            본문 = re.sub(r'의리 있게\s*\n\s*진정성 있게 전달돼요', '의리 있게 전달돼요', 본문)

            # 10. "~~로\n~~" 어색한 패턴 수정
            본문 = re.sub(r'원칙적으로\s*\n\s*능력을 인정받을', '원칙적으로 일하면\n능력을 인정받을', 본문)
            본문 = re.sub(r'전략적으로\s*\n\s*변화를 가져올', '전략적으로 접근하면\n변화를 가져올', 본문)

            fortune['본문'] = 본문

# 파일 저장
with open('today_unse/stories/05_갑신.json', 'w', encoding='utf-8') as f:
    json.dump(data, f, ensure_ascii=False, indent=2)

print("[OK] 05_갑신.json 문법 오류 수정 완료")
print("- 조사 중복 제거")
print("- 부사/형용사 불일치 수정")
print("- 어색한 표현 개선")
